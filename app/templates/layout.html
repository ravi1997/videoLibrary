<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}RPC Surgical Video Library{% endblock %}</title>

  <!-- Favicon -->
  <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon" />

  <!-- Tailwind build -->
  <link href="{{ url_for('static', filename='css/output.css') }}" rel="stylesheet" />

  <!-- Consolidated theme + component styles (new) -->
  <link href="{{ url_for('static', filename='css/theme.css') }}" rel="stylesheet" />

  {% block head_extra %}{% endblock %}
</head>

<!-- The theme will be applied via classes on both <html> and <body> by layout.js -->

<body class="min-h-screen flex flex-col">

  <!-- Header / Navbar -->
  <header id="mainHeader" class="navbar shadow-md sticky top-0 z-50">
    <div class="container">
      <!-- Left: Brand -->
      <a href="/" class="brand">
        <img src="{{ url_for('static', filename='images/RPC LOGO 2021.png') }}" alt="RPC Surgical Video Library"
          class="h-12 w-auto object-contain" loading="lazy" decoding="async" />
        <span class="brand-title">RPC Surgical Video Library</span>
      </a>

      <!-- Center: Search -->
      <div class="nav-center">
        <div class="search-wrap">
          <input id="searchInput" type="text" placeholder="Search videos‚Ä¶" class="search-input"
            aria-label="Search videos" />
          <button class="btn btn-primary" id="searchBtn" type="button" aria-label="Search videos">üîç Search</button>
        </div>
      </div>

      <!-- Right: Theme + Auth -->
      <div class="nav-right">
        <div class="flex flex-row gap-6">
          <!-- Theme toggle -->
          <button id="themeToggle" class="btn-ghost" title="Toggle theme" aria-label="Toggle theme">üåô</button>
  
          <!-- Auth area (filled by layout.js) -->
          <div id="authArea"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Page Content -->
  <main class="flex-1 container py-6 content-center">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="footer">
    &copy; 2025 RPC Surgical Library. All rights reserved.
  </footer>

  <!-- Scripts -->
  <script src="{{ url_for('static', filename='js/layout.js') }}"></script>
  <!-- NOTE: For state-changing requests using cookie-based JWTs, client JS must send X-CSRF-TOKEN header (handled in page scripts). -->
  <div id="toastHost" class="fixed top-4 right-4 z-[1000] space-y-2 pointer-events-none"></div>
  <!-- Global Playlist Multi-Select Modal -->
  <div id="plMultiModal" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-[1100]">
    <div class="card w-[560px] max-w-[95vw]">
      <div class="flex items-center justify-between">
        <div class="text-lg font-semibold">Add to Playlists</div>
        <button id="plMultiClose" class="btn-ghost" aria-label="Close">‚úï</button>
      </div>
      <div class="mt-3 max-h-[50vh] overflow-auto" id="plMultiList">
        <!-- checkboxes injected here -->
      </div>
      <div class="mt-3 flex items-center gap-2">
        <button id="plMultiSave" class="btn btn-primary">Save</button>
        <div id="plMultiMsg" class="text-sm muted"></div>
        <div class="flex-1"></div>
        <a class="text-xs no-underline hover:underline" href="/playlists">Manage Playlists</a>
      </div>
    </div>
  </div>
  {% block scripts %}{% endblock %}
  <script src="{{ url_for('static', filename='js/playlist_multi.js') }}" defer></script>
</body>

</html>
