{% extends "layout.html" %}

{% block content %}
<div class="max-w-3xl mx-auto mt-10 card p-6 space-y-6">
    <h1 class="text-2xl font-bold text-[color:var(--text)]">📤 Upload Video</h1>

    <!-- Drop Zone -->
    <div id="dropZone"
        class="w-full p-6 mb-4 border-2 border-dashed rounded-lg cursor-pointer text-center muted hover:bg-[color:var(--brand-50)] dark:hover:bg-[color:var(--brand-900)] transition">
        Drag &amp; drop your video file here or click to browse
    </div>

    <!-- Hidden File Input -->
    <input type="file" id="fileInput" accept="video/*" class="hidden" />

    <!-- Upload Button -->
    <button id="uploadBtn" class="btn-primary">Upload</button>

    <!-- Progress Bar + details -->
    <div id="progressContainer" class="w-full mt-4 hidden space-y-2">
        <div class="w-full bg-[color:var(--border)] rounded h-4 overflow-hidden">
            <div id="progressBar" class="h-4 bg-[color:var(--brand-600)] transition-all duration-200 ease-out" style="width:0%"></div>
        </div>
        <div class="flex items-center justify-between text-xs muted">
            <span id="progressLabel">0%</span>
            <span id="progressSpeed">0 MB/s</span>
            <span id="progressEta">ETA —</span>
            <span id="retryInfo" class="hidden">Retries: 0</span>
            <div class="flex items-center gap-2">
                <button id="pauseUploadBtn" class="btn-ghost px-2 py-1 rounded-lg border border-[color:var(--border)] hidden">Pause</button>
                <button id="cancelUploadBtn" class="btn-ghost px-2 py-1 rounded-lg border border-[color:var(--border)] hidden">Cancel</button>
                <button id="resumeUploadBtn" class="btn-ghost px-2 py-1 rounded-lg border border-[color:var(--border)] hidden">Resume</button>
            </div>
        </div>
    </div>

    <!-- Status -->
    <div id="uploadStatus" class="text-sm text-green-600 dark:text-green-400 hidden mt-2"></div>

    <!-- Metadata Form -->
    <div id="metaForm" class="space-y-4 hidden">
        <h2 class="text-xl font-semibold text-[color:var(--text)]">📝 Video Metadata</h2>

        <input id="title" type="text" placeholder="Title" class="w-full input" />

        <textarea id="description" rows="3" placeholder="Description" class="w-full input"></textarea>

        <!-- Category Dropdown -->
        <input list="categoryList" id="category" placeholder="Category" class="w-full input" />
        <datalist id="categoryList"></datalist>

        <!-- Tag Box Display -->
        <div id="tagContainer" class="flex flex-wrap gap-2 mb-2"></div>

        <!-- Tag Input with Datalist -->
        <input list="tagList" id="tagInput" placeholder="Type tag and press comma" class="w-full input" />
        <datalist id="tagList"></datalist>

        <!-- Surgeon Display -->
        <div id="surgeonContainer" class="flex flex-wrap gap-2 mb-2"></div>

        <!-- Surgeon Input with Datalist -->
        <input list="surgeonList" id="surgeonInput" placeholder="Type surgeon and press comma" class="w-full input" />
        <datalist id="surgeonList"></datalist>

    <button id="saveMetaBtn" class="btn-success w-full">
            💾 Save Metadata
        </button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}